<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sign In — PDGA Marketplace</title>
    <link rel="stylesheet" href="assets/css/root.css" />
    <link rel="stylesheet" href="assets/css/layout.css" />
    <link rel="stylesheet" href="assets/css/components.css" />
    <link rel="stylesheet" href="assets/css/utilities.css" />
    <link rel="stylesheet" href="assets/css/pages/signIn.css" />

    <style>
      /* Page-specific light tweaks (kept minimal) */
      .auth-wrap {
        max-width: 560px;
        margin: 40px auto;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 24px;
      }
      .field {
        display: grid;
        gap: 6px;
        margin-bottom: 14px;
      }
      .field input {
        padding: 10px 12px;
        border: 1px solid var(--border);
        border-radius: 8px;
        background: var(--surface);
      }
      .error {
        color: #b00020;
        font-size: 0.9rem;
        margin-top: 6px;
      }
      .pill {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--bg);
        font-size: 0.85rem;
      }
      .recommend-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 16px;
        margin-top: 16px;
      }
      .rec-card {
        border: 1px solid var(--border);
        background: var(--surface);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }
      .rec-card img {
        width: 100%;
        aspect-ratio: 4/3;
        object-fit: cover;
      }
      .rec-card .body {
        padding: 12px;
        display: grid;
        gap: 6px;
      }
      .row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
      }
      .actions {
        display: flex;
        gap: 10px;
      }
      .muted.small {
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <header class="site-header">
      <div class="container">
        <a class="brand" href="index.html">PDGA Marketplace</a>
        <ul class="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="tournamentItems.html">Event Supplies</a></li>
        </ul>
        <div class="header-actions" id="authActions">
          <a href="https://www.pdga.com/td/how-to-sanction-event" class="btn btn-box"
            >Create Event</a
          >
          <a id="signInLink" href="signIn.html" class="btn btn-box" aria-current="page">Sign In</a>
        </div>
      </div>
    </header>

    <main class="container">
      <!-- Sign In Card -->
      <section id="authSection" class="auth-wrap">
        <h2 style="margin-top: 0">Sign in</h2>
        <p class="muted small">
          Enter your email address to receive a verification link. After verifying, you can access recommendations for your events.
        </p>

        <form id="loginForm" style="margin-top: 16px">
          <div class="field">
            <label for="email"><b>Email</b></label>
            <input
              id="email"
              name="email"
              type="email"
              autocomplete="email"
              required
            />
          </div>
          <button class="btn" type="submit">Send Verification Link</button>
          <!-- Message shown after sending verification link -->
          <div id="message" class="muted small" role="alert" aria-live="polite" style="display: none"></div>
          <!-- Error messages -->
          <div id="error" class="error" role="alert" aria-live="polite" style="display: none"></div>
        </form>
      </section>

      <!-- Recommendations (hidden until login) -->
      <section id="recSection" style="display: none">
        <div class="row">
          <h2 style="margin: 0">Recommended for <span id="displayName"></span></h2>
          <span class="pill">Tier <span id="tierLabel"></span></span>
        </div>
        <p class="muted small" id="tierCopy" style="margin-top: 8px"></p>

        <div id="recGrid" class="recommend-grid" aria-live="polite"></div>

        <div class="actions" style="margin-top: 16px">
          <a class="btn" href="tournamentItems.html">Browse All Tournament Items</a>
          <button id="logoutBtn" class="btn btn-box" type="button">Log out</button>
        </div>
      </section>

      <!-- Event Selection (hidden until multiple events are detected) -->
      <section id="eventSelectSection" style="display: none">
        <h2 style="margin: 0">Select your event</h2>
        <p class="muted small" style="margin-top: 8px">
          Your email is associated with multiple events. Please choose which event you'd like to view recommendations for.
        </p>
        <div id="eventGrid" class="recommend-grid" aria-live="polite"></div>
      </section>
    </main>

    <footer>
      <div class="container footer">
        <p><b>PDGA Marketplace</b><br />Built for Tournament Directors & Clubs.</p>
        <p class="muted">© PDGA Marketplace</p>
      </div>
    </footer>
    <script defer src="javaScripts/signIn.js"></script>
  </body>
</html>
